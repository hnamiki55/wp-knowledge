(function(a){var b=a(window);var c=b.height();b.resize(function(){c=b.height()});a.fn.parallax=function(g,i,k){var j=a(this);var h;var d;var l=0;j.each(function(){d=0});getBgHeight=function(o){var n=new Image;n.src=o.css("background-image").replace(/url\(|\)$/ig,"");var m=n.height;return m};if(k){h=function(m){return m.outerHeight(true)}}else{h=function(m){return m.height()}}if(arguments.length<1||g===null){g="50%"}if(arguments.length<2||i===null){i=0.1}if(arguments.length<3||k===null){k=true}function f(){var m=b.scrollTop();j.each(function(r){var p=a(this);var q=p.offset().top;var o=h(p);var n=getBgHeight(p);if(q+o<m||q>m+c){return}j.css("backgroundPosition",g+" "+Math.round((d-m)*i)+"px")})}function e(){return"ontouchstart" in window||"onmsgesturechange" in window}if(!e()){b.bind("scroll",f).resize(f);f()}}})(jQuery);